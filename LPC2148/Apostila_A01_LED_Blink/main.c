/* =============================== C/C++ SOURCE FILE ================================ */
/**
  \file
  \description Escrever o que a rotina faz
  \author Nome do autor
*/
/* ================================================================================== */

/*------------------------------------------------------------------------------------*/
/*                                      INCLUDES                                      */
/*------------------------------------------------------------------------------------*/

#include "LPC214x.h"
#include "cpu_init.h"

/*------------------------------------------------------------------------------------*/
/*                               DEFINITIONS AND MACROS                               */
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
/*                          TYPEDEFS, CLASSES AND STRUCTURES                          */
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
/*                                     PROTOTYPES                                     */
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
/*                                  GLOBAL VARIABLES                                  */
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
/*                                  LOCAL  VARIABLES                                  */
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
/*                              FUNCTION  IMPLEMENTATION                              */
/*------------------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------------*/
/*  Função Principal                                                                  */
/*------------------------------------------------------------------------------------*/
int main (void)
{
  cpu_init();

  int j = 0; // Declara a variável j como inteiro de 32bit, porque a arquitetura do ARM é de 32bit, por isso, a faixa de valores de j é de -2.147.483.648 a +2.147.483.647

  PINSEL1 &= ~((1<<30)|(1<<31)); // O PINSEL1 é um registrador que seleciona a função dos pinos (P0.16-31) do PORT0 e utiliza 2 bits de configuração para cada pino. Neste caso, quando o bit 30 e 31 do registrador é igual a 0 (zero), o pino P0.31 é configurado como entrada/saída (I/O)- Ver item 7.4.1, denominado Pin Function Select Register no documento LPC214X User Manual.pdf

  IODIR0 |= (1<<31);  // Configura o pino correspondente ao bit 31 para saída

  while(1){

	  IOSET0 = (1<<31);  // Coloca o bit 31 em nível lógico alto

//	  delay_ms(1000); //for (j = 0; j < 1000000; j++ ) asm volatile ("NOP");    // Espera

	  for (j = 0; j < 1000000; j++ ) asm volatile ("NOP"); // Espera

	  IOCLR0 = (1<<31);  // Coloca o bit 31 em nível lógico baixo

//	  delay_ms(1000); //for (j = 0; j < 1000000; j++ ) asm volatile ("NOP");    // Espera

	  for (j = 0; j < 1000000; j++ ) asm volatile ("NOP"); // Espera
  }

  return(0);
}

/*------------------------------------------------------------------------------------*/
/*                                        EOF                                         */
/*------------------------------------------------------------------------------------*/


